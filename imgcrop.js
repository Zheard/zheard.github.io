window.onload=function(){var m=window.Cropper;var o=window.URL||window.webkitURL;var t=document.querySelector(".img-container");var s=t.getElementsByTagName("img").item(0);var q=document.getElementById("actions");var b={aspectRatio:tyle,viewMode:vmode,preview:".img-preview",autoCrop:true,strict:true,background:true,autoCropArea:1};var u=new m(s,b);var r=s.src;var v="image/jpeg";var p;if(!document.createElement("canvas").getContext){$('button[data-method="getCroppedCanvas"]').prop("disabled",true)}if(typeof document.createElement("cropper").style.transition==="undefined"){$('button[data-method="rotate"]').prop("disabled",true);$('button[data-method="scale"]').prop("disabled",true)}q.querySelector(".docs-buttons").onclick=function(g){var c=g||window.event;var d=c.target||c.srcElement;var e;var a;var h;var f;if(!u){return}while(d!==this){if(d.getAttribute("data-method")){break}d=d.parentNode}if(d===this||d.disabled||d.className.indexOf("disabled")>-1){return}f={method:d.getAttribute("data-method"),target:d.getAttribute("data-target"),option:d.getAttribute("data-option")||undefined,secondOption:d.getAttribute("data-second-option")||undefined};e=u.cropped;if(f.method){if(typeof f.target!=="undefined"){h=document.querySelector(f.target);if(!d.hasAttribute("data-option")&&f.target&&h){try{f.option=JSON.parse(h.value)}catch(c){console.log(c.message)}}}switch(f.method){case"rotate":if(e){u.clear()}break;case"getCroppedCanvas":try{f.option=JSON.parse(f.option)}catch(c){console.log(c.message)}if(v==="image/jpeg"){if(!f.option){f.option={}}f.option.fillColor="#fff"}break}a=u[f.method](f.option,f.secondOption);switch(f.method){case"rotate":if(e){u.crop()}break;case"scaleX":case"scaleY":d.setAttribute("data-option",-f.option);break;case"getCroppedCanvas":if(a){a.toBlob(function(j){var i=o.createObjectURL(j);$("#Cimg").attr("src",i)},"image/jpeg",1);$("#tad-taoanh").removeClass("disabled")}break;case"destroy":u=null;if(p){o.revokeObjectURL(p);p="";s.src=r}break}if(typeof a==="object"&&a!==u&&h){try{h.value=JSON.stringify(a)}catch(c){console.log(c.message)}}}};document.body.onkeydown=function(a){var c=a||window.event;if(!u||this.scrollTop>300){return}switch(c.keyCode){case 37:c.preventDefault();u.move(-1,0);break;case 38:c.preventDefault();u.move(0,-1);break;case 39:c.preventDefault();u.move(1,0);break;case 40:c.preventDefault();u.move(0,1);break}};$(".cropanh-container").hide();var n=document.getElementById("inputImage");if(o){n.onchange=function(){var c=this.files;var a;if(u&&c&&c.length){a=c[0];if(/^image\/\w+/.test(a.type)){v=a.type;if(p){o.revokeObjectURL(p)}s.src=p=o.createObjectURL(a);u.destroy();u=new m(s,b);n.value=null;$(".cropanh-container").show();$(".btn-upanh span,.btn-chonanh").html("<i class='fas fa-upload'></i> Elige otra foto")}else{window.alert("Elige un archivo de imagen")}}}}else{n.disabled=true;n.parentNode.className+=" disabled"}};
